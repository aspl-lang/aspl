// Original code taken and translated from: https://www.geeksforgeeks.org/julia-fractal-python/

import graphics

var width = 500
var height = 500
var zoom = 1f

var canvas = new RegularCanvas(500, 500)
canvas.fill(new Color(255b, 255b, 255b, 255b), false)

var cX = -0.7
var cY = 0.27015
var moveX = 0f
var moveY = 0f
var maxIterations = 255

repeat(width, x = 0){
    repeat(height, y = 0){
        var zx = 1.5 * (x - width / 2f) / (0.5 * zoom * width) + moveX
        var zy = 1.5 * (y - height / 2f) / (0.5 * zoom * height) + moveY
        var i = maxIterations
        while((zx * zx + zy * zy) < 4 && i > 1){
            var temp = zx * zx - zy * zy + cX
            zy = 2 * zx * zy + cY
            zx = temp
            i--
        }
        canvas.setPixel(x, y, Color:fromRGB(byte(i * 4), byte(i * 4), byte(i * 4)))
    }
}

canvas.save("julia_set.png")